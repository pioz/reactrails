{
  "version": 3,
  "sources": ["../../javascript/reactrails.js"],
  "sourcesContent": ["const warningMessage = (componentName) => `React component \"${componentName}\" is not registered.\n\nAdd your component in the React Rails registry:\n\n---\nimport React from 'react'\nimport ReactDOMClient from 'react-dom/client'\nimport ReactDOMServer from 'react-dom/server'\n\nimport ${componentName} from './${componentName}'\n\ninitReactRails(React, ReactDOMClient, ReactDOMServer, {\n  ${componentName},\n  Component1,\n  Component2\n})\n---`\n\nconst loadProps = (componentName, jsonStringProps) => {\n  jsonStringProps ||= '{}'\n  let props = {}\n  try {\n    props = JSON.parse(jsonStringProps)\n  } catch (e) {\n    console.error(`Invalid JSON in data-react-props for ${componentName}`, e)\n  }\n  return props\n}\n\nconst init = (React, ReactDOMClient, ReactDOMServer, registryComponents) => {\n  const loadComponents = () => {\n    console.log('LOAD REACT COMPONENTS')\n    const nodes = document.querySelectorAll('[data-react-component]')\n\n    nodes.forEach((el) => {\n      const componentName = el.dataset.reactComponent\n      const Component = registryComponents?.[componentName] || null\n      if (!Component) {\n        console.error(warningMessage(componentName))\n        return\n      }\n\n      const props = loadProps(componentName, el.dataset.reactProps)\n      const reactElement = React.createElement(Component, props)\n\n      // If server rendered, use hydrateRoot; otherwise createRoot.\n      if (el.hasChildNodes()) {\n        ReactDOMClient.hydrateRoot(el, reactElement)\n      } else {\n        const root = ReactDOMClient.createRoot(el)\n        root.render(reactElement)\n      }\n    })\n  }\n\n  if (typeof document !== 'undefined') {\n    // document.addEventListener('DOMContentLoaded', loadComponents)\n    document.addEventListener('turbo:load', loadComponents)\n  }\n\n  if (ReactDOMServer) {\n    globalThis.renderComponent = (componentName, propsJson) => {\n      const Component = registryComponents?.[componentName] || null\n      if (!Component) {\n        throw new Error(warningMessage(componentName))\n      }\n\n      const props = loadProps(componentName, propsJson)\n      const reactElement = React.createElement(Component, props)\n      return ReactDOMServer.renderToString(reactElement)\n    }\n  }\n\n}\n\nglobalThis.initReactRails = init\n"],
  "mappings": ";AAAA,IAAM,iBAAiB,CAAC,kBAAkB,oBAAoB,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SASlE,aAAa,YAAY,aAAa;AAAA;AAAA;AAAA,IAG3C,aAAa;AAAA;AAAA;AAAA;AAAA;AAMjB,IAAM,YAAY,CAAC,eAAe,oBAAoB;AACpD,sBAAoB;AACpB,MAAI,QAAQ,CAAC;AACb,MAAI;AACF,YAAQ,KAAK,MAAM,eAAe;AAAA,EACpC,SAAS,GAAG;AACV,YAAQ,MAAM,wCAAwC,aAAa,IAAI,CAAC;AAAA,EAC1E;AACA,SAAO;AACT;AAEA,IAAM,OAAO,CAAC,OAAO,gBAAgB,gBAAgB,uBAAuB;AAC1E,QAAM,iBAAiB,MAAM;AAC3B,YAAQ,IAAI,uBAAuB;AACnC,UAAM,QAAQ,SAAS,iBAAiB,wBAAwB;AAEhE,UAAM,QAAQ,CAAC,OAAO;AACpB,YAAM,gBAAgB,GAAG,QAAQ;AACjC,YAAM,YAAY,qBAAqB,aAAa,KAAK;AACzD,UAAI,CAAC,WAAW;AACd,gBAAQ,MAAM,eAAe,aAAa,CAAC;AAC3C;AAAA,MACF;AAEA,YAAM,QAAQ,UAAU,eAAe,GAAG,QAAQ,UAAU;AAC5D,YAAM,eAAe,MAAM,cAAc,WAAW,KAAK;AAGzD,UAAI,GAAG,cAAc,GAAG;AACtB,uBAAe,YAAY,IAAI,YAAY;AAAA,MAC7C,OAAO;AACL,cAAM,OAAO,eAAe,WAAW,EAAE;AACzC,aAAK,OAAO,YAAY;AAAA,MAC1B;AAAA,IACF,CAAC;AAAA,EACH;AAEA,MAAI,OAAO,aAAa,aAAa;AAEnC,aAAS,iBAAiB,cAAc,cAAc;AAAA,EACxD;AAEA,MAAI,gBAAgB;AAClB,eAAW,kBAAkB,CAAC,eAAe,cAAc;AACzD,YAAM,YAAY,qBAAqB,aAAa,KAAK;AACzD,UAAI,CAAC,WAAW;AACd,cAAM,IAAI,MAAM,eAAe,aAAa,CAAC;AAAA,MAC/C;AAEA,YAAM,QAAQ,UAAU,eAAe,SAAS;AAChD,YAAM,eAAe,MAAM,cAAc,WAAW,KAAK;AACzD,aAAO,eAAe,eAAe,YAAY;AAAA,IACnD;AAAA,EACF;AAEF;AAEA,WAAW,iBAAiB;",
  "names": []
}
